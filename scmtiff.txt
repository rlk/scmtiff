
INVARIANT: SCM TIFF files are BigTIFFs.

INVARIANT: SCM TIFF files represent a complete, correct, usable spherical cube map file, regardless of data process progress.

INVARIANT: An SCM TIFF file covers the entire sphere without gaps. As a consequence of this, an SCM TIFF contains at least six pages and each page has either zero or four sub-pages.

scm-convert ..... Convert a PDS, PNG, TIFF, or JPG file to a (leafy) SCM TIFF.
scm-combine ..... Combine multiple SCM TIFF files into one.
scm-mipmap  ..... Sample parent pages for an SCM TIFF wherever possible.
scm-border  ..... Fill the borders of an SCM TIFF wherever possible.
scm-normal  ..... Generate a normal SCM TIFF from a height SCM TIFF.

Mix LROC GLD100 with LOLA?


Convert

	Queue the six root pages
	While there is a page to dequeue

		If the page touches the input image
			If the page is a leaf
				Sample the page
				Write the filled page
			Else
				Write the empty page
				Queue the four sub-pages
		Else
			Write the empty page

	Note: A page write is always an append operation, however it must always include rewriting the parent.

	Invariant: When a page is queued, it WILL be written.

Combine

	Create an array of scms.
	Enqueue it six times.

	While there is an array to dequeue

		Copy the array of scms.

		For each non-NULL element of the array
			Read and accumulate the next page
			If the page has NO children
				NULL this element in the copied array

		Append the accumulated page to the output

		If the array has at least one non-NULL element,
			Enqueue the copied array four times

Border

	Make an array of the offsets of all pages.
