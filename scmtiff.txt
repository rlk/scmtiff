
INVARIANT: SCM TIFF files are BigTIFFs.

INVARIANT: SCM TIFF files represent a complete, correct, usable spherical cube map file, regardless of data process progress.

INVARIANT: An SCM TIFF file covers the entire sphere without gaps. As a consequence of this, an SCM TIFF contains at least six pages and each page has either zero or four sub-pages.

INVARIANT: All channels have the same depth and format.

INVARIANT: All pages have the same size, channel count, min value, and max value.

NOT invariant: No page order is defined.


TODO:

-	Optimize convert overlap detection

	MPI frontend

	Parallelize the zip.
		This may involve generalizing the number of "scanlines".

-	Fix the error at the international date line.

-	Skip the decode-encode in the append phase of the mipmap tool.
		(Cache the compression by noting the state of the zip buffer.)
		If done properly, this can also optimize the combine tool's operation
		upon pages with only one contributor.

-	Update scmview with the new colormap

-	Normal tool

-	Normalize option.
		Knock down the depth after sampling but before encoding.

-	Remove the min/max
		It's superfluous in the context of normalized data.

	Potential optimizations:
-		Precompute all pixel corners in convert sample
			This is a false optimization when n is not small

	Generalize channel counts in image access.
		switch (c) no longer suffices

-	Fix the mipmap flaw
		Turns out it was in the corner vector calculator

	$ time mpirun -np 16 ~/Projects/scmtiff/scmtiff-mpi -convert -n 256 -d 0 -norm0 -9160 -norm1 10770 ldem_1024_*.lbl
	real    4m0.345s
	user    0m0.035s
	sys     0m0.075s

	$ time mpirun -np 32 ~/Projects/scmtiff/scmtiff-mpi -convert -n 256 -d 0 -norm0 -9160 -norm1 10770 ldem_1024_*.lbl
	real    4m1.559s
	user    0m0.048s
	sys     0m0.094s

	$ time mpirun -np 48 ~/Projects/scmtiff/scmtiff-mpi -convert -n 256 -d 0 -norm0 -9160 -norm1 10770 ldem_1024_*.lbl
	real    3m41.149s
	user    0m0.061s
	sys     0m0.080s

	time mpirun -np 60 ~/Projects/scmtiff/scmtiff-mpi -convert -n 256 -d 0 -norm0 -9160 -norm1 10770 ldem_1024_*.lbl
	real    4m8.795s
	user    0m0.072s
	sys     0m0.132s
